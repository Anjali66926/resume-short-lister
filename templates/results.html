<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Shortlisting Results</title>
  <style>
    :root{
      --bg:#f8fafc; --card:#ffffff; --text:#0f172a; --muted:#64748b;
      --brand:#6d28d9; --brand-2:#ec4899; --ok:#16a34a; --mid:#f59e0b; --low:#ef4444;
    }
    *{box-sizing:border-box}
    body{
      margin:0; font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; color:var(--text);
      background:
        radial-gradient(1000px 600px at 10% -10%, #fdf2f8, transparent),
        radial-gradient(1000px 600px at 90% -10%, #eef2ff, transparent),
        var(--bg);
      min-height:100vh; padding:24px; display:flex; align-items:flex-start; justify-content:center;
    }
    .wrap{width:min(1100px,96vw)}
    .card{background:var(--card); padding:24px; border-radius:20px; box-shadow:0 16px 36px rgba(0,0,0,.06); border:1px solid #eef2f7}
    h1{margin:0 0 10px; font-size:clamp(22px, 3.2vw, 30px)}
    .jd{white-space:pre-wrap; background:#fbfbfe; border:1px solid #e5e7eb; padding:12px 14px; border-radius:12px; color:#111827}
    table{width:100%; border-collapse:separate; border-spacing:0 10px; margin-top:18px}
    th, td{padding:12px 14px; text-align:left}
    th{font-size:14px; color:#475569; border-bottom:1px solid #e5e7eb}
    tr{background:#fff; border-radius:12px}
    tr td:first-child{border-left:1px solid #eef2f7; border-top-left-radius:12px; border-bottom-left-radius:12px}
    tr td:last-child{border-right:1px solid #eef2f7; border-top-right-radius:12px; border-bottom-right-radius:12px}
    .file{font-weight:700}
    .bar{height:12px; width:100%; background:#f1f5f9; border-radius:999px; overflow:hidden; border:1px solid #e5e7eb}
    .fill{height:100%; width:0}
    .pct{font-variant-numeric: tabular-nums; font-weight:700}
    .chips{display:flex; flex-wrap:wrap; gap:6px}
    .chip{font-size:12px; padding:6px 8px; background:#f1f5f9; border:1px solid #e5e7eb; border-radius:999px}
    .row{display:flex; gap:12px; align-items:center}
    .btn{
      appearance:none; border:none; cursor:pointer; padding:10px 16px; font-weight:700;
      border-radius:999px; color:white;
      background: linear-gradient(135deg, var(--brand), var(--brand-2));
      box-shadow:0 10px 18px rgba(109,40,217,.18), 0 2px 6px rgba(236,72,153,.15);
    }
    .back{background:transparent; color:#6d28d9; border:1px solid #e5e7eb; box-shadow:none}
    .muted{color:var(--muted); font-size:14px}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <div class="row" style="justify-content:space-between">
        <h1>Shortlisting Results</h1>
        <a href="{{ url_for('index') }}"><button class="btn back">‚Üê Back</button></a>
      </div>

      <p class="muted">Job Description used for matching:</p>
      <div class="jd">{{ jd }}</div>

      <table>
        <thead>
          <tr>
            <th>Resume</th>
            <th style="width:220px">Match %</th>
            <th>Matched Keywords</th>
          </tr>
        </thead>
        <tbody>
          {% for r in results %}
          {% set p = r.percent %}
          <tr>
            <td class="file">{{ r.filename }}</td>
            <td>
              <div class="row" style="gap:10px">
                <div class="bar">
                  {% set width = p %}
                  {% set color = '#16a34a' if p>=70 else ('#f59e0b' if p>=40 else '#ef4444') %}
                  <div class="fill" style="width: {{ width }}%; background: {{ color }}"></div>
                </div>
                <span class="pct">{{ '%.2f'|format(p) }}%</span>
              </div>
            </td>
            <td>
              {% if r.matches %}
                <div class="chips">
                  {% for m in r.matches %}
                    <span class="chip">{{ m }}</span>
                  {% endfor %}
                </div>
              {% else %}
                <span class="muted">No obvious overlaps found</span>
              {% endif %}
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>

      {% if not results %}
        <p class="muted">No resumes were processed.</p>
      {% endif %}
    </div>
  </div>
</body>
</html>
